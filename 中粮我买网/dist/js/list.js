"use strict";!function(){var a=location.search.split("=")[1],n=1,i=0,s="ASC",c=!1,t="g_price>0 AND",e=new GetUser("userid",".log-reg");e.getData();var l=e.getCart();l&&l.then(function(a){var s="",c=0,t=0;a.orders.forEach(function(a){c+=1*a.count,t+=a.count*a.g_price,s+='<li class="spc-item">\n                            <img src="'+a.g_url+'" alt="">\n                            <p class="spc-name">\n                                '+a.g_name+'\n                            </p>\n                            <p class="spc-operation">\n                                <span class="spc-price">￥'+a.g_price+'</span>\n                                <span class="spc-count"> x '+a.count+'</span>\n                                <a href="javascript:;" class="spc-del">删除</a>\n                            </p>\n                        </li>'}),$(".sidebar-spcart .spcart-list").html(s),$(".cart-count").text(c),$(".sidebar-spcart .pay-count").text("总共"+c+"件"),$(".sidebar-spcart .pay-price").text("￥"+t)});var r=!0,p=0;$(".sidebar .shop-cart").click(function(){p=r?276:0,r=!r,$(".sidebar").stop().animate({right:p+"px"}),$(".sidebar-spcart").stop().animate({width:p+"px"})}),$(".page-list").on("click","li",function(){n=1*$(this).text(),$(this).attr("class","active").siblings().attr("class",""),g()}),$(".page-prev").on("click",function(){n=n=0<n-1?n-1:1,g()}),$(".page-next").on("click",function(){n=n=n+1<=i?n+1:i,g()}),$(".nav-btns li").eq(2).click(function(){s=c?"ASC":"DESC",$(this).toggleClass("active"),c=!c,g()}),$(".nav-sure-btn").click(function(){$(".low-price").val().trim()&&$(".low-price").val().trim()&&(t=" g_price BETWEEN "+$(".low-price").val().trim()+" AND "+$(".high-price").val().trim()+" AND ",g())});var o="";if(1==a.length){switch(a*=1){case 0:a="海鲜肉类";break;case 1:a="时令蔬果";break;case 2:a="进口食品";break;case 3:a="饮料冲调";break;case 4:a="休闲保健";break;case 5:a="调味粮油";break;case 6:a="奶制品";break;case 7:a="母婴食品";break;case 8:case 9:case 10:a="全球购"}o="../api/getgoodslist.php"}else o="../api/search.php",a=decodeURI(a);function g(){$.ajax({type:"GET",url:o,data:{type:a,page:n,sort:s,section:t,pageCount:10},dataType:"json",success:function(a){0==a.code?function(a){var s="",c="";i=Math.ceil(a.count/10),a.list.forEach(function(a){s+='<div class="goods" data-id="'+a.g_id+'" data-type="'+a.g_type+'">\n                        <img src="'+a.g_url+'" alt="">\n                        <p class="price">￥'+a.g_price+'</p>\n                        <p class="intro">\n                            '+a.g_name+'\n                        </p>\n                        <ul class="label-list">\n                            <li>\n                                已评价\n                                <span class="com-count">99+</span>\n                            </li>\n                            <li>\n                                <span class="iconfont icon-shoucang\n                                "></span>\n                                收藏\n                            </li>\n                            <li>\n                                <span class="iconfont icon-gouwuche"></span>\n                                加入购物车\n                            </li>\n                        </ul>\n                    </div>'}),$(".goods-list").html(s).on("click",".goods",function(){window.open("goods.html?gid="+$(this).attr("data-id")+"&gtype="+encodeURI($(this).attr("data-type")))});for(var t=1;t<=i;t++)c+=t!=n?"<li>"+t+"</li>":'<li class="active">'+t+"</li>";$(".page-list").html(c),$(".page-num").html("共"+i+"页"),$(".new-page").val(n),$(".low-price").val(""),$(".high-price").val("")}(a):$(".goods-list").html("没有找到该商品....")}})}g(),search(".search-input",".search-btn")}();