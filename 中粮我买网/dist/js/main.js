"use strict";!function(){siwerp({el:".siwerp",data:["img/indeximg/banner1.jpg","img/indeximg/banner2.jpg","img/indeximg/banner3.jpg","img/indeximg/banner4.jpg","img/indeximg/banner5.jpg","img/indeximg/banner6.jpg","img/indeximg/banner7.jpg","img/indeximg/banner8.jpg","img/indeximg/banner9.jpg"],timer:4e3,width:800,height:450});var t=null;function e(t,e){this.checkStr=t,this.ele=e}window.onload=function(){t=setTimeout(function(){$(".top-box").animate({height:"100px"},600)},3e3)},window.onscroll=function(){clearTimeout(t),$(".top-box").animate({height:"100px"},600)},$(".news-btns li").each(function(t,e){$(e).on("mouseenter",function(){$(this).attr("class","active").siblings().attr("class",""),$(".news-panel").eq(t).attr("class","news-panel show").siblings().attr("class","news-panel")})}),$(".menu-one .kinds-btn").hover(function(){$(this).css({backgroundColor:"#ffffff"}).siblings().css("background","none"),$(this).find(">a").css("color","#3ea600"),$(this).find(".icon").css("backgroundPosition","-18px 0"),$(this).find(".sub-kinds").addClass("show")},function(){$(this).css("background","none"),$(this).find(">a").css("color","#ffffff"),$(this).find(".icon").css("backgroundPosition","0 0"),$(this).find(".sub-kinds").removeClass("show")}),$.ajax({type:"GET",url:"lib/jsondata/kindslist.json",dataType:"json",success:function(t){!function(c){var r=0,l=0;$(".sub-kinds").each(function(t,e){var n="",i="";switch(t){case 0:r=9,l=0;break;case 1:l+=r,r=2;break;case 2:l+=r,r=9;break;case 3:case 4:l+=r,r=8;break;case 5:l+=r,r=7;break;case 6:l+=r,r=4;break;case 7:l+=r,r=6;break;case 8:case 9:case 10:l+=r,r=1}for(var s=l,o=s+r;s<o&&c[s];s++){for(var a=0;a<c[s].list.length;a++)i+='<li><a href="###">'+c[s].list[a]+"</a></li>";n+='<div class="kinds-list">\n                            <h4 class="sub-head">'+c[s].kinds+"</h4>\n                            <ul>\n                                "+i+"\n                            </ul>\n                        </div>",i=""}e.innerHTML=n})}(t)}}),$(".lunbo-box .right-btn").click(function(){$(".lunbo-box ul").stop().animate({marginLeft:"-1210px"})}),$(".lunbo-box .left-btn").click(function(){$(".lunbo-box ul").stop().animate({marginLeft:"0px"})}),e.prototype={getCookie:function(){var e=this,t=document.cookie,n=null;return 0<t.length&&(t.split("; ").some(function(t){if(-1!=t.indexOf(e.checkStr))return n=t.split("=")[1],!0}),n)},getData:function(){var n=this,t=this.getCookie(this.checkStr);t?$.ajax({type:"get",url:"api/checkid.php",data:{userid:t},success:function(t){var e=JSON.parse(t);0==e.code&&$(n.ele).html(e.username+'<a class="out-btn" href="###" style="padding-left:15px;">退出</a>'),$(".out-btn").on("click",function(){!function(){var t=new Date;t.setDate(t.getDate()-1),document.cookie="userid=0; expires="+t+";path=/",location.reload()}()})}}):console.log("请先进行登录!")},getCart:function(){var n=this;return this.getCookie(this.checkStr)?new Promise(function(e,t){$.ajax({type:"get",url:"api/getcart.php",dataType:"json",data:{uid:n.getCookie(n.checkStr)},success:function(t){e(t)}})}):null}};var n=new e("userid",".log-reg");n.getData();var i=n.getCart();i&&i.then(function(t){var e="",n=0,i=0;t.orders.forEach(function(t){n+=1*t.count,i+=t.count*t.g_price,e+='<li class="spc-item">\n                            <img src="'+t.g_url+'" alt="">\n                            <p class="spc-name">\n                                '+t.g_name+'\n                            </p>\n                            <p class="spc-operation">\n                                <span class="spc-price">￥'+t.g_price+'</span>\n                                <span class="spc-count"> x '+t.count+'</span>\n                                <a href="javascript:;" class="spc-del">删除</a>\n                            </p>\n                        </li>'}),$(".sidebar-spcart .spcart-list").html(e),$(".cart-count").text(n),$(".sidebar-spcart .pay-count").text("总共"+n+"件"),$(".sidebar-spcart .pay-price").text("￥"+i)});var s=!0,o=0;$(".sidebar .shop-cart").click(function(){o=s?276:0,s=!s,$(".sidebar").stop().animate({right:o+"px"}),$(".sidebar-spcart").stop().animate({width:o+"px"})});var a=!1;function c(t,e){$(e).click(function(){window.open("html/list.html?str="+encodeURI($(t).val())),console.log(11)})}$(document).on("scroll",function(){!function(){if(600<=document.documentElement.scrollTop){if(a)return;a=!0,$(".suction-top").stop().animate({height:"80px"},200)}else{if(!a)return;a=!1,$(".suction-top").stop().animate({height:"0px"},200)}}(),function(){document.documentElement.scrollTop+window.innerHeight/2>$(".f1").get(0).offsetTop?$(".floor-nav").css("display","block"):$(".floor-nav").css("display","none");document.documentElement.scrollTop+window.innerHeight/2>$(".f9").get(0).offsetTop?$(".floor-nav li").eq(8).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>=$(".f8").get(0).offsetTop?$(".floor-nav li").eq(7).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f7").get(0).offsetTop?$(".floor-nav li").eq(6).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f6").get(0).offsetTop?$(".floor-nav li").eq(5).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f5").get(0).offsetTop?$(".floor-nav li").eq(4).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f4").get(0).offsetTop?$(".floor-nav li").eq(3).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f3").get(0).offsetTop?$(".floor-nav li").eq(2).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f2").get(0).offsetTop?$(".floor-nav li").eq(1).attr("class","curr").siblings().attr("class",""):document.documentElement.scrollTop+window.innerHeight/2>$(".f1").get(0).offsetTop&&$(".floor-nav li").eq(0).attr("class","curr").siblings().attr("class","")}()}),$(".floor-nav").css("left",$(".content").get(0).offsetLeft-50+"px"),window.onresize=function(){$(".floor-nav").css("left",$(".content").get(0).offsetLeft-50+"px")},$(".floor-nav li").each(function(t,e){e.onclick=function(){$(document.documentElement).animate({scrollTop:$(".f"+(t+1)).get(0).offsetTop-window.innerHeight/2+10})}}),$(".menu-one ul li").each(function(t,e){$(e).click(function(){window.open("html/list.html?type="+t),console.log(t)})}),$.ajax({type:"get",url:"api/getgoodslist.php",dataType:"json",data:{type:"奶制品",page:1,pages:0,pageCount:4,sort:"ASC",section:"g_price>0 AND"},success:function(n){0==n.code?$(".hot-goods .goods").each(function(t,e){$(e).attr("data-id",n.list[t].g_id).attr("data-type",n.list[t].g_type).on("click",function(){window.open("html/goods.html?gid="+$(this).attr("data-id")+"&gtype"+encodeURI($(this).attr("data-type")))}),$(e).find("img").attr("src",n.list[t].g_url),$(e).find(".nametext").text(n.list[t].g_name),$(e).find(".introtext").text(n.list[t].g_intro),$(e).find(".price span").text("￥"+n.list[t].g_price)}):$(".hot-goods .goods-list").append($("<p>数据获取失败……</p>"))}}),$(".floor").each(function(t,e){var n="";switch(t){case 0:n="海鲜肉类";break;case 1:n="时令蔬果";break;case 2:n="进口食品";break;case 3:n="饮料冲调";break;case 4:n="休闲保健";break;case 5:n="调味粮油";break;case 6:n="奶制品";break;case 7:n="母婴食品";break;case 8:case 9:case 10:n="全球购"}$.ajax({type:"get",url:"api/getgoodslist.php",dataType:"json",data:{type:n,page:1,pages:0,pageCount:6,sort:"ASC",section:"g_price>0 AND"},success:function(n){0==n.code&&$(e).find(".item").each(function(t,e){$(e).find("img").attr("src",n.list[t].g_url),$(e).find(".intro").text(n.list[t].g_name),$(e).find(".price span").eq(1).text(n.list[t].g_price),$(e).attr("data-id",n.list[t].g_id).attr("data-type",n.list[t].g_type).on("click",function(){window.open("html/goods.html?gid="+n.list[t].g_id+"&gtype="+encodeURI(n.list[t].g_type))})})}})}),c(".search-input",".search-btn"),c(".search-txt",".search-bt")}();